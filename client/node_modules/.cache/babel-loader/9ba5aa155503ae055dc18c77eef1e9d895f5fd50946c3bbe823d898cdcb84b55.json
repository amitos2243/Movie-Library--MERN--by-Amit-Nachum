{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\Full Stack\\\\Movie Library (MERN) by Amit Nachum\\\\client\\\\src\\\\components\\\\movies\\\\SubscriptionList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport SubscriptionsService from '../../services/subscriptions.service';\nimport MembersService from '../../services/members.service';\nimport { Card, Typography } from '@material-ui/core';\nimport { NavLink } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubscriptionList = _ref => {\n  _s();\n  let {\n    movieId\n  } = _ref;\n  const [members, setMembers] = useState([]);\n  const formatDate = registrationDate => {\n    const date = new Date(registrationDate);\n    return date.toDateString();\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      // list of members that watched movie with proper movie_id\n      const subscriptions = await SubscriptionsService.getMembersByMovieId(movieId);\n      if (subscriptions.length > 0) {\n        const membersForMovie = [];\n        subscriptions.map(async s => {\n          const member = await MembersService.getMember(s.member_id);\n          membersForMovie.push({\n            ...s,\n            name: member.name\n          });\n          if (membersForMovie.length === subscriptions.length) setMembers(membersForMovie);\n        });\n      }\n    };\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    style: {\n      padding: '30px',\n      minWidth: '350px',\n      minHeight: ' 120px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      style: {\n        color: '#0D340D'\n      },\n      children: \"Subs watched\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: members.map(member => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          to: `/members/edit/${member.member_id}`,\n          children: member.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 49\n        }, this), \", \", formatDate(member.date)]\n      }, member.member_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n_s(SubscriptionList, \"vkicIfJtsxnOItErHE0sT+V21Y0=\");\n_c = SubscriptionList;\nexport default SubscriptionList;\nvar _c;\n$RefreshReg$(_c, \"SubscriptionList\");","map":{"version":3,"names":["useState","useEffect","SubscriptionsService","MembersService","Card","Typography","NavLink","jsxDEV","_jsxDEV","SubscriptionList","_ref","_s","movieId","members","setMembers","formatDate","registrationDate","date","Date","toDateString","fetchData","subscriptions","getMembersByMovieId","length","membersForMovie","map","s","member","getMember","member_id","push","name","style","padding","minWidth","minHeight","children","variant","color","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Desktop/Full Stack/Movie Library (MERN) by Amit Nachum/client/src/components/movies/SubscriptionList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport SubscriptionsService from '../../services/subscriptions.service';\r\nimport MembersService from '../../services/members.service';\r\nimport { Card, Typography } from '@material-ui/core';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst SubscriptionList = ({ movieId }) => {\r\n    const [members, setMembers] = useState([]);\r\n\r\n    const formatDate = (registrationDate) => {\r\n        const date = new Date(registrationDate);\r\n        return date.toDateString();\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            // list of members that watched movie with proper movie_id\r\n            const subscriptions = await SubscriptionsService.getMembersByMovieId(movieId);\r\n\r\n            if (subscriptions.length > 0) {\r\n                const membersForMovie = [];\r\n                subscriptions.map(async s => {\r\n                    const member = await MembersService.getMember(s.member_id);\r\n                    membersForMovie.push({ ...s, name: member.name })\r\n                    if (membersForMovie.length === subscriptions.length)\r\n                        setMembers(membersForMovie);\r\n                })\r\n\r\n            }\r\n        }\r\n        fetchData();\r\n    }, [])\r\n\r\n    return (\r\n\r\n        <Card style={{ padding: '30px', minWidth: '350px', minHeight: ' 120px' }}>\r\n\r\n            <Typography variant='h5' style={{ color: '#0D340D' }}>Subs watched</Typography>\r\n            <ul>\r\n                {members.map(member =>\r\n                    <li key={member.member_id}>{<NavLink to={`/members/edit/${member.member_id}`}>{member.name}</NavLink>}, {formatDate(member.date)}</li>)}\r\n            </ul>\r\n        </Card>\r\n    );\r\n}\r\nexport default SubscriptionList;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,oBAAoB,MAAM,sCAAsC;AACvE,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,SAASC,IAAI,EAAEC,UAAU,QAAQ,mBAAmB;AACpD,SAASC,OAAO,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG3C,MAAMC,gBAAgB,GAAGC,IAAA,IAAiB;EAAAC,EAAA;EAAA,IAAhB;IAAEC;EAAQ,CAAC,GAAAF,IAAA;EACjC,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMe,UAAU,GAAIC,gBAAgB,IAAK;IACrC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,gBAAgB,CAAC;IACvC,OAAOC,IAAI,CAACE,YAAY,EAAE;EAC9B,CAAC;EAEDlB,SAAS,CAAC,MAAM;IACZ,MAAMmB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B;MACA,MAAMC,aAAa,GAAG,MAAMnB,oBAAoB,CAACoB,mBAAmB,CAACV,OAAO,CAAC;MAE7E,IAAIS,aAAa,CAACE,MAAM,GAAG,CAAC,EAAE;QAC1B,MAAMC,eAAe,GAAG,EAAE;QAC1BH,aAAa,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAI;UACzB,MAAMC,MAAM,GAAG,MAAMxB,cAAc,CAACyB,SAAS,CAACF,CAAC,CAACG,SAAS,CAAC;UAC1DL,eAAe,CAACM,IAAI,CAAC;YAAE,GAAGJ,CAAC;YAAEK,IAAI,EAAEJ,MAAM,CAACI;UAAK,CAAC,CAAC;UACjD,IAAIP,eAAe,CAACD,MAAM,KAAKF,aAAa,CAACE,MAAM,EAC/CT,UAAU,CAACU,eAAe,CAAC;QACnC,CAAC,CAAC;MAEN;IACJ,CAAC;IACDJ,SAAS,EAAE;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,oBAEIZ,OAAA,CAACJ,IAAI;IAAC4B,KAAK,EAAE;MAAEC,OAAO,EAAE,MAAM;MAAEC,QAAQ,EAAE,OAAO;MAAEC,SAAS,EAAE;IAAS,CAAE;IAAAC,QAAA,gBAErE5B,OAAA,CAACH,UAAU;MAACgC,OAAO,EAAC,IAAI;MAACL,KAAK,EAAE;QAAEM,KAAK,EAAE;MAAU,CAAE;MAAAF,QAAA,EAAC;IAAY;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAa,eAC/ElC,OAAA;MAAA4B,QAAA,EACKvB,OAAO,CAACY,GAAG,CAACE,MAAM,iBACfnB,OAAA;QAAA4B,QAAA,gBAA4B5B,OAAA,CAACF,OAAO;UAACqC,EAAE,EAAG,iBAAgBhB,MAAM,CAACE,SAAU,EAAE;UAAAO,QAAA,EAAET,MAAM,CAACI;QAAI;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAW,EAAC,IAAE,EAAC3B,UAAU,CAACY,MAAM,CAACV,IAAI,CAAC;MAAA,GAAvHU,MAAM,CAACE,SAAS;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAA6G;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAC1I;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACF;AAEf,CAAC;AAAA/B,EAAA,CAtCKF,gBAAgB;AAAAmC,EAAA,GAAhBnC,gBAAgB;AAuCtB,eAAeA,gBAAgB;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}